<!-- 
 
Published site: https://andypiatek.github.io/dgmde28/a2c/ttt_v4.html

-->

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tic-Tac-Toe Game v2</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family:
          "Franklin Gothic Medium", "Arial Narrow", Arial, sans-serif;
        background-color: rgb(10, 33, 71);
      }
      .header {
        text-align: center;
        margin-top: 50px;
      }
      h1 {
        font-size: 3rem;
        color: rgb(255, 255, 255);
      }
      #box-container {
        display: flex;
        flex-wrap: wrap;
        max-width: 330px;
        width: 100%;
        margin: 20px auto;
        justify-content: center;
      }
      .square {
        width: 100px;
        height: 100px;
        margin: 5px;
        background-color: rgb(255, 255, 255);
        border: 1px solid rgb(0, 0, 0);
        font-size: 2.5rem;
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
        color: rgb(44, 44, 44);
      }
      .square:hover {
        background-color: rgb(117, 214, 153);
        cursor: pointer;
      }
      .footer {
        text-align: center;
        margin: 40px auto;
      }

      button#start {
        display: block;
        margin: 20px auto;
        padding: 10px 20px;
        font-size: 1.2rem;
        background-color: rgb(117, 214, 153);
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }

      button#start:hover {
        background-color: rgb(153, 117, 214);
      }

      a {
        color: rgb(255, 255, 255);
        text-decoration: none;
        font-size: 1.2rem;
      }

      a:hover {
        color: rgb(117, 214, 153);
      }

      #turn-section h2 {
        text-align: center;
        margin: 20px auto;
        font-size: 1.5rem;
        color: rgb(255, 255, 255);
        border: 1px solid rgb(255, 255, 255);
        width: 300px;
        padding: 10px;
      }

      #turn {
        font-weight: bold;
        color: rgb(153, 117, 214);
      }

      @media (max-width: 600px) {
        .box {
          background-color: rgb(0, 0, 0);
          color: rgb(255, 255, 255);
        }
      }
    </style>
    <script>
      const NUM_SQUARES = 9;
      const turns = ["X", "O"];

      const rand = Math.random();
      console.log("Random number: " + rand);
      let currentTurn = rand < 0.5 ? turns[0] : turns[1]; // randomly select starting turn
      console.log("Current turn: " + currentTurn);

      window.onload = function () {
        // attach button handlers to the squares
        for (let i = 0; i < NUM_SQUARES; i++) {
          id = "sq" + i;
          // using getElementById - experiment only
          // document.getElementById(id).onclick = buttonHander;

          //using querySelector is more flexible - CSS selector syntax
          document.querySelector("#" + id).onclick = buttonHander;
        }

        document.getElementById("turn").innerHTML = currentTurn; // update DOM with the starting turn
      };
      function buttonHander() {
        console.log("Square " + this.id + " was clicked.");

        // check if the square is already occupied - this also prevents the turn from toggling
        if (this.textContent !== "") return;

        // Aleternative, disable the button but removing event handler - is this a good practice?
        // this.onclick = null;

        document.getElementById(this.id).innerHTML = currentTurn;
        // console.log(document.getElementById(this.id).innerHTML);
        index = parseInt(this.id.substring(2)); // get the number part of the id
        console.log("Square index: " + index);
        currentTurn = currentTurn === turns[0] ? turns[1] : turns[0]; // toggle turns
        document.getElementById("turn").textContent = currentTurn; //
      }
    </script>
  </head>
  <body>
    <header class="header">
      <h1>Tic Tac Toe Game</h1>
    </header>
    <main>
      <div id="turn-section">
        <h2><span id="turn"></span>'s Turn</h2>
      </div>
      <div id="box-container">
        <script>
          // draw the 9 squares of the board
          // square params are in the css
          // square ids will be sq1, sq2,...
          // const NUM_SQUARES = 9;
          for (let i = 0; i < 9; i++) {
            id = "sq" + i;
            document.write("<div class='square' id='" + id + "'></div>");
          }
        </script>
      </div>
      <button id="start">Start Game</button>
    </main>
    <footer class="footer">
      <a href="https://en.wikipedia.org/wiki/Tic-tac-toe" target="_blank"
        >Game Instructions</a
      >
    </footer>
  </body>
</html>
